; Listing generated by Microsoft (R) Optimizing Compiler Version 19.00.23918.0 

	TITLE	C:\Users\w23\Revision2017_4k\pbr-whitespace-master\src\_windows\main_rel.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	__fltused
PUBLIC	?lpSoundBuffer@@3PAMA				; lpSoundBuffer
PUBLIC	?fragment_glsl@@3PBDB				; fragment_glsl
PUBLIC	?out_glsl@@3PBDB				; out_glsl
PUBLIC	?post_glsl@@3PBDB				; post_glsl
_BSS	SEGMENT
?lpSoundBuffer@@3PAMA DD 0cb9f80H DUP (?)		; lpSoundBuffer
_BSS	ENDS
wavehdr	SEGMENT
?WaveHDR@@3Uwavehdr_tag@@A DD FLAT:?lpSoundBuffer@@3PAMA ; WaveHDR
	DD	032e7e00H
	DD	00H
	DD	00H
	DD	00H
	DD	00H
	DD	00H
	DD	00H
?MMTime@@3Ummtime_tag@@A DD 02H				; MMTime
	DD	00H
	ORG $+4
$SG48302 DB	'glGetObjectParameterivARB', 00H
	ORG $+2
$SG48303 DB	'glGetInfoLogARB', 00H
$SG48305 DB	'COMPILE', 00H
$SG48306 DB	'glGetObjectParameterivARB', 00H
	ORG $+2
$SG48307 DB	'glGetInfoLogARB', 00H
$SG48309 DB	'LINK', 00H
	ORG $+3
$SG48320 DB	'T', 00H
	ORG $+2
$SG48321 DB	'V', 00H
	ORG $+2
$SG48322 DB	'FB', 00H
wavehdr	ENDS
wavefmt	SEGMENT
?WaveFMT@@3UtWAVEFORMATEX@@A DW 03H			; WaveFMT
	DW	02H
	DD	0ac44H
	DD	056220H
	DW	08H
	DW	020H
	DW	00H
wavefmt	ENDS
CONST	SEGMENT
?pfd@@3UtagPIXELFORMATDESCRIPTOR@@B DW 028H		; pfd
	DW	01H
	DD	025H
	DB	00H
	DB	020H
	DB	00H
	DB	00H
	DB	00H
	DB	00H
	DB	00H
	DB	00H
	DB	08H
	DB	00H
	DB	00H
	DB	00H
	DB	00H
	DB	00H
	DB	00H
	DB	020H
	DB	00H
	DB	00H
	DB	00H
	DB	00H
	DD	00H
	DD	00H
	DD	00H
$SG47356 DB	'uniform float T;uniform vec2 V;uniform vec3 M;const vec3'
	DB	' v=vec3(0.,.001,1.);const float m=3.14159;float f(float v){re'
	DB	'turn fract(sin(v)*43758.5);}float x(vec2 v){return fract(1000'
	DB	'0.*sin(17.*v.r+.1*v.g)*(.1+abs(sin(13.*v.g+v.r))));}float s(v'
	DB	'ec3 v){return x(vec2(x(v.rg),v.b));}float n(vec2 m){vec2 f=fl'
	DB	'oor(m);m-=f;m*=m*(3.-2.*m);return mix(mix(x(f),x(f+v.br),m.r)'
	DB	',mix(x(f+v.rb),x(f+v.bb),m.r),m.g);}float d(vec3 m){vec3 f=fl'
	DB	'oor(m);m-=f;m*=m*(3.-2.*m);return mix(mix(mix(s(f),s(f+v.brr)'
	DB	',m.r),mix(s(f+v.rbr),s(f+v.bbr),m.r),m.g),mix(mix(s(f+v.rrb),'
	DB	's(f+v.brb),m.r),mix(s(f+v.rbb),s(f+v.bbb),m.r),m.g),m.b);}flo'
	DB	'at t(float v){float m=floor(v);v-=m;v*=v*(3.-2.*v);return mix'
	DB	'(f(m),f(m+1.),v);}float d(vec2 v,vec2 r){return v=abs(v)-r,ma'
	DB	'x(v.r,v.g);}float f(vec3 v,vec3 r){return v=abs(v)-r,max(v.r,'
	DB	'max(v.g,v.b));}mat3 r(float v){float m=sin(v),r=cos(v);return'
	DB	' mat3(1.,0.,0.,0.,r,-m,0.,m,r);}mat3 p(float v){float m=sin(v'
	DB	'),f=cos(v);return mat3(f,0.,m,0.,1.,0,-m,0.,f);}mat3 e(float '
	DB	'v){float m=sin(v),f=cos(v);return mat3(f,m,0.,-m,f,0.,0.,0.,1'
	DB	'.);}float e(vec3 v,float m){return length(v)-m;}vec3 n(vec3 v'
	DB	',vec3 m){return mod(v,m)-m*.5;}vec2 p(vec2 v,vec2 m){return m'
	DB	'od(v,m)-m*.5;}float d(vec3 v,float m,float f,float r){float b'
	DB	'=length(v);return max(abs(v.g)-r,max(b-f,m-b));}float i(vec2 '
	DB	'v){return max(v.r,v.g);}float K(vec3 v){v=p(T*.1)*v;const flo'
	DB	'at m=2.8;const int r=5;vec3 a=vec3(1.1,.9,1.9);for(int b=0;b<'
	DB	'r;++b){v=v*p(.1+T*.3);v=abs(v);v.rg+=step(v.r,v.g)*(v.gr-v.rg'
	DB	');v.rb+=step(v.r,v.b)*(v.br-v.rb);v.gb+=step(v.g,v.b)*(v.bg-v'
	DB	'.gb);v=v*e(.1);v.rg=v.rg*m-(m-1.)*a.rg;v.b=m*v.b;if(v.b>.5*a.'
	DB	'b*(m-1.))v.b-=a.b*(m-1.);}return f(v,vec3(1.))*pow(m,-float(r'
	DB	'));}bool b=true,g=false,O_=false;int A_=0;', 0aH, '#define PI'
	DB	'CK(d,dn,mn)if(O_){if(dn<d){d=dn;A_=mn;}}else d=min(d,dn);', 0aH
	DB	'float c(vec3 v){float m=i(abs(v.rg)-vec2(2.,.1));if(g)m=m+max'
	DB	'(0.,.2*d(p(v.rb,vec2(.1)),vec2(.01)));v.r=abs(v.r)+.02;float '
	DB	'f=i(abs(v.rg-vec2(2.,1.))-vec2(.02)),r=max(abs(mod(v.b,.4)-.2'
	DB	')-.02,max(abs(v.g-.5)-.5,abs(v.r-2.)-.02));return min(m,min(f'
	DB	',r));}float h(vec3 v){return f(v-vec3(33.,1.6,0.),vec3(20.,1.'
	DB	'5,1.96));}', 0aH, '#define LN 5', 0aH, 'vec3 P[LN],l[LN];void'
	DB	' K(){float v=11.;P[0]=vec3(v,6.,v);P[1]=vec3(v,6.,-v);P[2]=ve'
	DB	'c3(-v,6.,-v);P[3]=vec3(-v,6.,v);P[4]=vec3(0.);l[0]=30.*vec3(.'
	DB	'7,.35,.45)*mix(1.,t(T*20.),.3);l[1]=30.*vec3(.7,.35,.15)*mix('
	DB	'1.,t(T*20.+10.),.3);l[2]=30.*vec3(.3,.35,.75)*mix(1.,t(T*20.+'
	DB	'20.),.3);l[3]=30.*vec3(.7,.35,.15)*mix(1.,t(T*20.+30.),.3);l['
	DB	'4]=smoothstep(44.,50.,T)*50.*vec3(1.)*mix(1.,t(T*20.+30.),.3)'
	DB	';}float w(vec3 v){float m=100000.;if(b)for(int r=0;r<LN;++r)P'
	DB	'ICK(m,length(v-P[r])-.1,r+100);float r=length(v.rb),a=atan(v.'
	DB	'r,v.b),t=length(v),s=-min(h(vec3(abs(v.r),v.gb)),h(vec3(abs(v'
	DB	'.b),v.gr))),o=max(-e(v,19.),f(n(v,vec3(2.)),vec3(.8))),x=-e(v'
	DB	',20.);PICK(m,x,1);PICK(m,o,2);m=max(s,m);float i=e(v,9.);i=ma'
	DB	'x(i,abs(abs(v.g)-3.)-.5);i=max(i,-d(p(vec2(a*4.,v.g*.2),vec2('
	DB	'.4)),vec2(.08)));if(g)i-=.1*d(floor(v*10.));i=min(i,f(n(v,vec'
	DB	'3(11.8)),vec3(.1,100.,.1)));i=max(i,-e(v,8.9));float l=c(vec3'
	DB	'(r-13.,v.g,a*10.));l=min(l,max(15.-r,min(c(v.bgr),c(v))));l=m'
	DB	'ax(l,s);PICK(m,i,3);PICK(m,l,4);if(T>44.){if(t<8.){float L=mi'
	DB	'x(.001,4.,smoothstep(44.,54.,T));PICK(m,K(v/L)*L,5);}else m=m'
	DB	'in(m,t+2.);}return m;}vec3 L(vec3 m){float r=w(m);return norm'
	DB	'alize(vec3(w(m+v.grr)-r,w(m+v.rgr)-r,w(m+v.rrg)-r));}void K(v'
	DB	'ec3 v,out vec3 m,out vec3 r,out vec3 f,out float i,out float '
	DB	'b){g=true;O_=true;m=L(v);r=vec3(0.,1.,1.);f=vec3(0.);i=0.;b=0'
	DB	'.;if(A_==1)r=vec3(0.),f=vec3(1.),i=.5,b=.99;else if(A_==2){fl'
	DB	'oat t=sin(T+dot(normalize(vec3(1.)),floor(v/2.)));f=max(0.,t)'
	DB	'*vec3(1.);r=vec3(0.);i=.2;b=.99;}else if(A_==3)r=vec3(0.),f=v'
	DB	'ec3(1.),i=.8,b=.99;else if(A_==4)r=vec3(0.),f=vec3(.56,.57,.5'
	DB	'8),b=.8,i=.2+.6*pow(d(v*4.+40.),4.);else if(A_==5)r=vec3(0.),'
	DB	'f=vec3(1.),i=.9,b=0.;else{for(int P=0;P<LN;++P)if(A_==100+P)r'
	DB	'=l[P],f=vec3(0.),i=0.,b=0.;}O_=false;g=false;}float K(float v'
	DB	',float f){f*=f;f*=f;float r=v*v*(f-1.)+1.;r=m*r*r;return f/r;'
	DB	'}float L(float v,float m){return m+=1.,m*=m/8.,v/(v*(1.-m)+m)'
	DB	';}vec3 K(vec3 v,vec3 m,float r,float b){float f=0.,i=1000.;in'
	DB	't a;for(a=0;a<128;++a){vec3 g=v+m*f;float s=w(g);f+=s*r;i=min'
	DB	'(i,s);if(s<.002*f||f>b)break;}return vec3(f,i,float(a));}vec3'
	DB	' K(vec3 v,vec3 f,vec3 r,float i,vec3 t,float b,float g){vec3 '
	DB	'a=vec3(0.);for(int s=0;s<LN;++s){vec3 d=P[s]-v;float e=dot(d,'
	DB	'd),o=sqrt(e);d=normalize(d);vec3 x=K(v+.02*d,d,1.,o);if(x.g<.'
	DB	'005||x.r<o)continue;vec3 n=normalize(f+d),c=mix(vec3(.04),t,b'
	DB	');float p=max(dot(n,f),0.),w=max(dot(r,f),0.),h=max(dot(r,d),'
	DB	'0.),u=max(dot(r,n),0.);vec3 C=c+(1.-c)*pow(1.-p,5.);float I=L'
	DB	'(w,g)*L(h,g);vec3 z=K(u,g)*I*C/(4.*w*h+.001);a+=((vec3(1.)-C)'
	DB	'*(1.-b)*t/m+z)*h*l[s]/e;}vec3 d=vec3(.03)*t*i;return d+a;}mat'
	DB	'3 K(vec3 v,vec3 m,vec3 f){vec3 r=normalize(v-m),b=normalize(c'
	DB	'ross(f,r));f=cross(r,b);return mat3(b,f,r);}void main(){vec2 '
	DB	'm=gl_FragCoord.rg/V*2.-1.;m.r*=V.r/V.g;K();vec3 f=normalize(v'
	DB	'ec3(m,-1.44)),r,i=vec3(0.);if(T<23.)r=vec3(mix(40.,11,T/23.),'
	DB	'2.,0.);else if(T<34.){float a=T-34.;r=vec3(cos(a*.1)*13.,2.,s'
	DB	'in(a*.1)*14.);i=vec3(20.,0.,20.);}else if(T<62.)r=vec3(cos(T*'
	DB	'.1)*13.,2.,sin(T*.1)*14.);else{float a=T*2./10.48,g=floor(a);'
	DB	'r=13.*mix(vec3(t(g),t(g+4.),t(g+5.)),vec3(t(g+17.),t(g+41.),t'
	DB	'(g+35.)),a-g);}float g=T*3.;r+=.1*vec3(t(g),t(g+1.),t(g+3.));'
	DB	'mat3 a=K(r,i,v.rbr);r+=a*vec3(m*.01,0.);f=a*f;vec3 d=vec3(0.)'
	DB	';const float s=40.;vec3 x=K(r,f,1.,s);if(x.r<s){vec3 l=r+x.r*'
	DB	'f,o,c,e;float n,w;K(l,e,c,o,w,n);b=false;d=c+K(l,-f,e,0.,o,n,'
	DB	'w);}gl_FragColor=vec4(d,x.r);}', 00H
	ORG $+1
$SG47359 DB	'uniform sampler2D FB;uniform vec2 V;void main(){gl_FragC'
	DB	'olor=texture2D(FB,gl_FragCoord.rg/V);}', 00H
	ORG $+1
$SG47362 DB	'uniform sampler2D FB;uniform vec2 V;void main(){vec2 v=g'
	DB	'l_FragCoord.rg/V;vec4 F=texture2D(FB,v);vec3 g=vec3(0.);float'
	DB	' s=2.;const int a=256;const float i=2.399;mat2 t=mat2(cos(i),'
	DB	'sin(i),-sin(i),cos(i));vec3 f=vec3(0.);vec4 m=vec4(F.rgb,1.);'
	DB	'vec2 r=vec2(.002*V.g/V.r,.002),c=vec2(0.,1.1);float p=1.;for('
	DB	'int u=0;u<a;u++){p+=1./p;c*=t;vec2 e=r*(p-1.)*c;vec4 l=textur'
	DB	'e2D(FB,v+e);f+=l.rgb;if(l.a<F.a){float b=length(e),o=abs(l.a-'
	DB	's)/V.r,B=step(b,o);B=step(b*.01,B);m+=vec4(l.rgb,1.)*B;}}g+=p'
	DB	'ow(f/float(a),vec3(2.));g+=m.rgb/m.a;g=g/(g+1.);gl_FragColor='
	DB	'vec4(pow(g,vec3(1./2.2)),1.);}', 00H
CONST	ENDS
_DATA	SEGMENT
__fltused DD	01H
?fragment_glsl@@3PBDB DD FLAT:$SG47356			; fragment_glsl
?screenSettings@@3U_devicemodeA@@A DB 00H		; screenSettings
	ORG $+31
	DW	00H
	DW	00H
	DW	09cH
	DW	00H
	DD	01c0000H
	DW	00H
	ORG $+14
	DW	00H
	DW	00H
	DW	00H
	DW	00H
	DW	00H
	DB	00H
	ORG $+31
	DW	00H
	DD	020H
	DD	0500H
	DD	02d0H
	DD	00H
	DD	00H
	DD	00H
	DD	00H
	DD	00H
	DD	00H
	DD	00H
	DD	00H
	DD	00H
	DD	00H
?out_glsl@@3PBDB DD FLAT:$SG47359			; out_glsl
?post_glsl@@3PBDB DD FLAT:$SG47362			; post_glsl
_DATA	ENDS
PUBLIC	?entrypoint@@YGXXZ				; entrypoint
PUBLIC	__real@3a83126f
PUBLIC	__xmm@41f00000000000000000000000000000
EXTRN	__imp__ExitProcess@4:PROC
EXTRN	__imp__CreateThread@24:PROC
EXTRN	__imp__ChoosePixelFormat@8:PROC
EXTRN	__imp__SetPixelFormat@12:PROC
EXTRN	__imp__wglCreateContext@4:PROC
EXTRN	__imp__wglGetProcAddress@4:PROC
EXTRN	__imp__wglMakeCurrent@8:PROC
EXTRN	__imp__SwapBuffers@4:PROC
EXTRN	__imp__CreateWindowExA@48:PROC
EXTRN	__imp__GetAsyncKeyState@4:PROC
EXTRN	__imp__GetDC@4:PROC
EXTRN	__imp__MessageBoxA@16:PROC
EXTRN	__imp__ShowCursor@4:PROC
EXTRN	__imp__ChangeDisplaySettingsA@8:PROC
EXTRN	__imp__waveOutOpen@24:PROC
EXTRN	__imp__waveOutPrepareHeader@12:PROC
EXTRN	__imp__waveOutWrite@12:PROC
EXTRN	__imp__waveOutGetPosition@12:PROC
EXTRN	__imp__timeGetTime@0:PROC
EXTRN	__imp__glBindTexture@8:PROC
EXTRN	__imp__glGenTextures@8:PROC
EXTRN	__imp__glRects@16:PROC
EXTRN	__imp__glTexImage2D@36:PROC
EXTRN	__imp__glTexParameteri@12:PROC
EXTRN	?EXT_Init@@YGXXZ:PROC				; EXT_Init
EXTRN	__4klang_render@4:PROC
EXTRN	?oglCreateShader@@3P6GII@ZA:DWORD		; oglCreateShader
EXTRN	?oglShaderSource@@3P6GXIHPAPBDPBH@ZA:DWORD	; oglShaderSource
EXTRN	?oglCompileShader@@3P6GXI@ZA:DWORD		; oglCompileShader
EXTRN	?oglCreateProgram@@3P6GIXZA:DWORD		; oglCreateProgram
EXTRN	?oglAttachShader@@3P6GXII@ZA:DWORD		; oglAttachShader
EXTRN	?oglLinkProgram@@3P6GXI@ZA:DWORD		; oglLinkProgram
EXTRN	?oglUseProgram@@3P6GXI@ZA:DWORD			; oglUseProgram
EXTRN	?oglGetUniformLocation@@3P6GHIPBD@ZA:DWORD	; oglGetUniformLocation
EXTRN	?oglUniform1i@@3P6GXHH@ZA:DWORD			; oglUniform1i
EXTRN	?oglUniform1f@@3P6GXHM@ZA:DWORD			; oglUniform1f
EXTRN	?oglUniform2f@@3P6GXHMM@ZA:DWORD		; oglUniform2f
EXTRN	?oglGenFramebuffers@@3P6GXHPAI@ZA:DWORD		; oglGenFramebuffers
EXTRN	?oglBindFramebuffer@@3P6GXII@ZA:DWORD		; oglBindFramebuffer
EXTRN	?oglFramebufferTexture2D@@3P6GXIIIIH@ZA:DWORD	; oglFramebufferTexture2D
EXTRN	__fltused:DWORD
_BSS	SEGMENT
?hWaveOut@@3PAUHWAVEOUT__@@A DD 01H DUP (?)		; hWaveOut
_BSS	ENDS
;	COMDAT __xmm@41f00000000000000000000000000000
CONST	SEGMENT
__xmm@41f00000000000000000000000000000 DB 00H, 00H, 00H, 00H, 00H, 00H, 00H
	DB	00H, 00H, 00H, 00H, 00H, 00H, 00H, 0f0H, 'A'
CONST	ENDS
;	COMDAT __real@3a83126f
CONST	SEGMENT
__real@3a83126f DD 03a83126fr			; 0.001
CONST	ENDS
; Function compile flags: /Ogspy
; File c:\users\w23\revision2017_4k\pbr-whitespace-master\src\_windows\main_rel.cpp
;	COMDAT ?entrypoint@@YGXXZ
fltused	SEGMENT
_time$1$ = -36						; size = 4
_to$1$ = -32						; size = 4
_p_out$1$ = -28						; size = 4
_fb$ = -24						; size = 12
_tex$ = -12						; size = 12
?entrypoint@@YGXXZ PROC					; entrypoint, COMDAT

; 139  : {

	sub	esp, 36					; 00000024H
	push	ebx
	push	ebp
	push	esi
	push	edi

; 140  : 	// initialize window
; 141  : 	#ifdef FULLSCREEN
; 142  : 	ChangeDisplaySettings(&screenSettings,CDS_FULLSCREEN);

	push	4
	push	OFFSET ?screenSettings@@3U_devicemodeA@@A
	call	DWORD PTR __imp__ChangeDisplaySettingsA@8

; 143  : 	ShowCursor(0);

	xor	edi, edi
	push	edi
	call	DWORD PTR __imp__ShowCursor@4

; 144  : 	HDC hDC = GetDC(CreateWindow((LPCSTR)0xC018, 0, WS_POPUP | WS_VISIBLE, 0, 0, XRES, YRES, 0, 0, 0, 0));

	push	edi
	push	edi
	push	edi
	push	edi
	push	720					; 000002d0H
	push	1280					; 00000500H
	push	edi
	push	edi
	push	-1879048192				; 90000000H
	push	edi
	push	49176					; 0000c018H
	push	edi
	call	DWORD PTR __imp__CreateWindowExA@48
	push	eax
	call	DWORD PTR __imp__GetDC@4
	mov	esi, eax

; 145  : 	#else
; 146  : 	HDC hDC = GetDC(CreateWindow("static", 0, WS_POPUP | WS_VISIBLE, 0, 0, XRES, YRES, 0, 0, 0, 0));
; 147  : 	#endif	
; 148  : 
; 149  : 	// initalize opengl
; 150  : 	SetPixelFormat(hDC,ChoosePixelFormat(hDC,&pfd),&pfd);

	mov	eax, OFFSET ?pfd@@3UtagPIXELFORMATDESCRIPTOR@@B
	push	eax
	push	eax
	push	esi
	call	DWORD PTR __imp__ChoosePixelFormat@8
	push	eax
	push	esi
	call	DWORD PTR __imp__SetPixelFormat@12

; 151  : 	wglMakeCurrent(hDC,wglCreateContext(hDC));

	push	esi
	call	DWORD PTR __imp__wglCreateContext@4
	push	eax
	push	esi
	call	DWORD PTR __imp__wglMakeCurrent@8

; 152  : 	EXT_Init();

	call	?EXT_Init@@YGXXZ			; EXT_Init

; 153  : 
; 154  : 	const int p_ray = compileProgram(fragment_glsl);

	push	DWORD PTR ?fragment_glsl@@3PBDB		; fragment_glsl
	call	?compileProgram@@YGHPBD@Z		; compileProgram

; 155  : 	const int p_dof = compileProgram(post_glsl);

	push	DWORD PTR ?post_glsl@@3PBDB		; post_glsl
	mov	ebx, eax
	call	?compileProgram@@YGHPBD@Z		; compileProgram

; 156  : 	const int p_out = compileProgram(out_glsl);

	push	DWORD PTR ?out_glsl@@3PBDB		; out_glsl
	mov	ebp, eax
	call	?compileProgram@@YGHPBD@Z		; compileProgram
	mov	DWORD PTR _p_out$1$[esp+52], eax

; 157  : 
; 158  : 	GLuint tex[FbTex_COUNT], fb[FbTex_COUNT];
; 159  : 	glGenTextures(FbTex_COUNT, tex);

	lea	eax, DWORD PTR _tex$[esp+52]
	push	eax
	push	3
	call	DWORD PTR __imp__glGenTextures@8

; 160  : 	oglGenFramebuffers(FbTex_COUNT, fb);

	lea	eax, DWORD PTR _fb$[esp+52]
	push	eax
	push	3
	call	DWORD PTR ?oglGenFramebuffers@@3P6GXHPAI@ZA ; oglGenFramebuffers

; 161  : 
; 162  : 	initFbTex(tex[FbTex_Ray], fb[FbTex_Ray]);

	push	DWORD PTR _fb$[esp+56]
	push	DWORD PTR _tex$[esp+60]
	call	?initFbTex@@YGXHH@Z			; initFbTex

; 163  : 	initFbTex(tex[FbTex_Dof], fb[FbTex_Dof]);

	push	DWORD PTR _fb$[esp+60]
	push	DWORD PTR _tex$[esp+64]
	call	?initFbTex@@YGXHH@Z			; initFbTex

; 164  : // initialize sound
; 165  : 	CreateThread(0, 0, (LPTHREAD_START_ROUTINE)_4klang_render, lpSoundBuffer, 0, 0);

	push	edi
	push	edi
	push	OFFSET ?lpSoundBuffer@@3PAMA		; lpSoundBuffer
	push	OFFSET __4klang_render@4
	push	edi
	push	edi
	call	DWORD PTR __imp__CreateThread@24

; 166  : 	waveOutOpen(&hWaveOut, WAVE_MAPPER, &WaveFMT, NULL, 0, CALLBACK_NULL);

	push	edi
	push	edi
	push	edi
	push	OFFSET ?WaveFMT@@3UtWAVEFORMATEX@@A
	push	-1
	push	OFFSET ?hWaveOut@@3PAUHWAVEOUT__@@A
	call	DWORD PTR __imp__waveOutOpen@24

; 167  : 	waveOutPrepareHeader(hWaveOut, &WaveHDR, sizeof(WaveHDR));

	push	32					; 00000020H
	mov	edi, OFFSET ?WaveHDR@@3Uwavehdr_tag@@A
	push	edi
	push	DWORD PTR ?hWaveOut@@3PAUHWAVEOUT__@@A
	call	DWORD PTR __imp__waveOutPrepareHeader@12

; 168  : 	waveOutWrite(hWaveOut, &WaveHDR, sizeof(WaveHDR));

	push	32					; 00000020H
	push	edi
	push	DWORD PTR ?hWaveOut@@3PAUHWAVEOUT__@@A
	call	DWORD PTR __imp__waveOutWrite@12

; 169  : 	const int to = timeGetTime();

	mov	edi, DWORD PTR __imp__timeGetTime@0
	call	edi
	mov	DWORD PTR _to$1$[esp+52], eax
$LL4@entrypoint:

; 170  : 	
; 171  : 	//glViewport(0, 0, XRES, YRES);
; 172  : 	// play intro
; 173  : 	do 
; 174  : 	{
; 175  : 		waveOutGetPosition(hWaveOut, &MMTime, sizeof(MMTIME));

	push	12					; 0000000cH
	push	OFFSET ?MMTime@@3Ummtime_tag@@A
	push	DWORD PTR ?hWaveOut@@3PAUHWAVEOUT__@@A
	call	DWORD PTR __imp__waveOutGetPosition@12

; 176  : 		const float time = (timeGetTime() - to) * 1e-3f;

	call	edi
	sub	eax, DWORD PTR _to$1$[esp+52]

; 177  : 		//paint(p_ray, 0, 0/*fb[FbTex_Ray]*/, ray, time);
; 178  : 		paint(p_ray, 0, fb[FbTex_Ray], time);

	push	ecx
	movd	xmm0, eax
	cvtdq2pd xmm0, xmm0
	shr	eax, 31					; 0000001fH
	addsd	xmm0, QWORD PTR __xmm@41f00000000000000000000000000000[eax*8]
	cvtpd2ps xmm0, xmm0
	mulss	xmm0, DWORD PTR __real@3a83126f
	movss	DWORD PTR [esp], xmm0
	push	DWORD PTR _fb$[esp+60]
	movss	DWORD PTR _time$1$[esp+60], xmm0
	push	0
	push	ebx
	call	?paint@@YGXHHHM@Z			; paint

; 179  : 		paint(p_dof, tex[FbTex_Ray], fb[FbTex_Dof], time);

	movss	xmm0, DWORD PTR _time$1$[esp+52]
	push	ecx
	movss	DWORD PTR [esp], xmm0
	push	DWORD PTR _fb$[esp+64]
	push	DWORD PTR _tex$[esp+64]
	push	ebp
	call	?paint@@YGXHHHM@Z			; paint

; 180  : 		paint(p_out, tex[FbTex_Dof], 0, time);

	movss	xmm0, DWORD PTR _time$1$[esp+52]
	push	ecx
	movss	DWORD PTR [esp], xmm0
	push	0
	push	DWORD PTR _tex$[esp+68]
	push	DWORD PTR _p_out$1$[esp+64]
	call	?paint@@YGXHHHM@Z			; paint

; 181  : 		SwapBuffers(hDC);

	push	esi
	call	DWORD PTR __imp__SwapBuffers@4

; 182  : 	} while(!GetAsyncKeyState(VK_ESCAPE) && MMTime.u.sample < 5990000);

	push	27					; 0000001bH
	call	DWORD PTR __imp__GetAsyncKeyState@4
	test	ax, ax
	jne	SHORT $LN5@entrypoint
	cmp	DWORD PTR ?MMTime@@3Ummtime_tag@@A+4, 5990000 ; 005b6670H
	jb	$LL4@entrypoint
$LN5@entrypoint:

; 183  : 
; 184  : 	#ifdef CLEANDESTROY
; 185  : 	sndPlaySound(0,0);
; 186  : 	ChangeDisplaySettings( 0, 0 );
; 187  : 	ShowCursor(1);
; 188  : 	#endif
; 189  : 
; 190  : 	ExitProcess(0);

	push	0
	call	DWORD PTR __imp__ExitProcess@4
	pop	edi
	pop	esi
	pop	ebp
	pop	ebx
$LN11@entrypoint:
$LN10@entrypoint:
?entrypoint@@YGXXZ ENDP					; entrypoint
fltused	ENDS
; Function compile flags: /Ogspy
; File c:\users\w23\revision2017_4k\pbr-whitespace-master\src\_windows\main_rel.cpp
;	COMDAT ?paint@@YGXHHHM@Z
fltused	SEGMENT
_prog$ = 8						; size = 4
_src_tex$ = 12						; size = 4
_dst_fb$ = 16						; size = 4
_time$ = 20						; size = 4
?paint@@YGXHHHM@Z PROC					; paint, COMDAT

; 123  : static void paint(int prog, int src_tex, int dst_fb, float time) {

	push	ebp
	mov	ebp, esp

; 124  : 	oglUseProgram(prog);

	push	DWORD PTR _prog$[ebp]
	call	DWORD PTR ?oglUseProgram@@3P6GXI@ZA	; oglUseProgram

; 125  : 	glBindTexture(GL_TEXTURE_2D, src_tex);

	push	DWORD PTR _src_tex$[ebp]
	push	3553					; 00000de1H
	call	DWORD PTR __imp__glBindTexture@8

; 126  : 	oglBindFramebuffer(GL_FRAMEBUFFER, dst_fb);

	push	DWORD PTR _dst_fb$[ebp]
	push	36160					; 00008d40H
	call	DWORD PTR ?oglBindFramebuffer@@3P6GXII@ZA ; oglBindFramebuffer

; 127  : 	oglUniform1f(oglGetUniformLocation(prog, "T"), time);

	movss	xmm0, DWORD PTR _time$[ebp]
	push	ecx
	movss	DWORD PTR [esp], xmm0
	push	OFFSET $SG48320
	push	DWORD PTR _prog$[ebp]
	call	DWORD PTR ?oglGetUniformLocation@@3P6GHIPBD@ZA ; oglGetUniformLocation
	push	eax
	call	DWORD PTR ?oglUniform1f@@3P6GXHM@ZA	; oglUniform1f

; 128  : 	oglUniform2f(oglGetUniformLocation(prog, "V"), XRES, YRES);

	push	ecx
	push	ecx
	mov	DWORD PTR [esp+4], 1144258560		; 44340000H
	mov	DWORD PTR [esp], 1151336448		; 44a00000H
	push	OFFSET $SG48321
	push	DWORD PTR _prog$[ebp]
	call	DWORD PTR ?oglGetUniformLocation@@3P6GHIPBD@ZA ; oglGetUniformLocation
	push	eax
	call	DWORD PTR ?oglUniform2f@@3P6GXHMM@ZA	; oglUniform2f

; 129  : 	oglUniform1i(oglGetUniformLocation(prog, "FB"), 0);

	push	0
	push	OFFSET $SG48322
	push	DWORD PTR _prog$[ebp]
	call	DWORD PTR ?oglGetUniformLocation@@3P6GHIPBD@ZA ; oglGetUniformLocation
	push	eax
	call	DWORD PTR ?oglUniform1i@@3P6GXHH@ZA	; oglUniform1i

; 130  : 	glRects(-1, -1, 1, 1);

	push	1
	push	1
	push	-1
	push	-1
	call	DWORD PTR __imp__glRects@16

; 131  : }

	pop	ebp
	ret	16					; 00000010H
?paint@@YGXHHHM@Z ENDP					; paint
fltused	ENDS
; Function compile flags: /Ogspy
; File c:\users\w23\revision2017_4k\pbr-whitespace-master\src\_windows\main_rel.cpp
;	COMDAT ?initFbTex@@YGXHH@Z
fltused	SEGMENT
_fb$ = 8						; size = 4
_tex$ = 12						; size = 4
?initFbTex@@YGXHH@Z PROC				; initFbTex, COMDAT

; 112  : static void initFbTex(int fb, int tex) {

	push	ebx
	push	ebp
	push	esi
	push	edi

; 113  : 	glBindTexture(GL_TEXTURE_2D, tex);

	push	DWORD PTR _tex$[esp+12]
	mov	ebp, 3553				; 00000de1H
	push	ebp
	call	DWORD PTR __imp__glBindTexture@8

; 114  : 	glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA16F, XRES, YRES, 0, GL_RGBA, GL_FLOAT, 0);

	xor	ebx, ebx
	push	ebx
	push	5126					; 00001406H
	push	6408					; 00001908H
	push	ebx
	push	720					; 000002d0H
	push	1280					; 00000500H
	push	34842					; 0000881aH
	push	ebx
	push	ebp
	call	DWORD PTR __imp__glTexImage2D@36

; 115  : 	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);

	mov	esi, DWORD PTR __imp__glTexParameteri@12
	mov	edi, 9729				; 00002601H
	push	edi
	push	10241					; 00002801H
	push	ebp
	call	esi

; 116  : 	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);

	push	edi
	push	10240					; 00002800H
	push	ebp
	call	esi

; 117  : 	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_BORDER);

	mov	edi, 33069				; 0000812dH
	push	edi
	push	10242					; 00002802H
	push	ebp
	call	esi

; 118  : 	glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_BORDER);

	push	edi
	push	10243					; 00002803H
	push	ebp
	call	esi

; 119  : 	oglBindFramebuffer(GL_FRAMEBUFFER, fb);

	push	DWORD PTR _fb$[esp+12]
	mov	esi, 36160				; 00008d40H
	push	esi
	call	DWORD PTR ?oglBindFramebuffer@@3P6GXII@ZA ; oglBindFramebuffer

; 120  : 	oglFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, tex, 0);

	push	ebx
	push	DWORD PTR _tex$[esp+16]
	push	ebp
	push	36064					; 00008ce0H
	push	esi
	call	DWORD PTR ?oglFramebufferTexture2D@@3P6GXIIIIH@ZA ; oglFramebufferTexture2D
	pop	edi
	pop	esi
	pop	ebp
	pop	ebx

; 121  : }

	ret	8
?initFbTex@@YGXHH@Z ENDP				; initFbTex
fltused	ENDS
; Function compile flags: /Ogspy
; File c:\users\w23\revision2017_4k\pbr-whitespace-master\src\_windows\main_rel.cpp
;	COMDAT ?compileProgram@@YGHPBD@Z
fltused	SEGMENT
_result$ = -2052					; size = 4
_info$ = -2048						; size = 2048
_fragment$ = 8						; size = 4
?compileProgram@@YGHPBD@Z PROC				; compileProgram, COMDAT

; 75   : static int compileProgram(const char *fragment) {

	sub	esp, 2052				; 00000804H
	push	ebx
	push	ebp
	push	esi
	push	edi

; 76   : 	const int pid = oglCreateProgram();

	call	DWORD PTR ?oglCreateProgram@@3P6GIXZA	; oglCreateProgram

; 77   : 	const int fsId = oglCreateShader(GL_FRAGMENT_SHADER);

	push	35632					; 00008b30H
	mov	esi, eax
	call	DWORD PTR ?oglCreateShader@@3P6GII@ZA	; oglCreateShader
	mov	edi, eax

; 78   : 	oglShaderSource(fsId, 1, &fragment, 0);

	xor	ebp, ebp
	push	ebp
	lea	eax, DWORD PTR _fragment$[esp+2068]
	push	eax
	push	1
	push	edi
	call	DWORD PTR ?oglShaderSource@@3P6GXIHPAPBDPBH@ZA ; oglShaderSource

; 79   : 	oglCompileShader(fsId);

	push	edi
	call	DWORD PTR ?oglCompileShader@@3P6GXI@ZA	; oglCompileShader

; 80   : 
; 81   : #ifdef SHADER_DEBUG
; 82   : 	int result;
; 83   : 	char info[2048];
; 84   : #define oglGetObjectParameteriv ((PFNGLGETOBJECTPARAMETERIVARBPROC) wglGetProcAddress("glGetObjectParameterivARB"))
; 85   : #define oglGetInfoLog ((PFNGLGETINFOLOGARBPROC) wglGetProcAddress("glGetInfoLogARB"))
; 86   : 	oglGetObjectParameteriv(fsId, GL_OBJECT_COMPILE_STATUS_ARB, &result);

	mov	ebx, DWORD PTR __imp__wglGetProcAddress@4
	lea	eax, DWORD PTR _result$[esp+2068]
	push	eax
	push	35713					; 00008b81H
	push	edi
	push	OFFSET $SG48302
	call	ebx
	call	eax

; 87   : 	oglGetInfoLog(fsId, 2047, NULL, (char*)info);

	lea	eax, DWORD PTR _info$[esp+2068]
	push	eax
	push	ebp
	push	2047					; 000007ffH
	push	edi
	push	OFFSET $SG48303
	call	ebx
	call	eax

; 88   : 	if (!result)

	cmp	DWORD PTR _result$[esp+2068], ebp
	jne	SHORT $LN2@compilePro

; 89   : 	{
; 90   : 		MessageBox(NULL, info, "COMPILE", 0x00000000L);

	push	ebp
	push	OFFSET $SG48305
	lea	eax, DWORD PTR _info$[esp+2076]
$LN6@compilePro:
	push	eax
	push	ebp
	call	DWORD PTR __imp__MessageBoxA@16

; 91   : 		ExitProcess(0);

	push	ebp
	call	DWORD PTR __imp__ExitProcess@4
$LN8@compilePro:
$LN2@compilePro:

; 92   : 	}
; 93   : #endif
; 94   : 
; 95   : 	oglAttachShader(pid, fsId);

	push	edi
	push	esi
	call	DWORD PTR ?oglAttachShader@@3P6GXII@ZA	; oglAttachShader

; 96   : 	oglLinkProgram(pid);

	push	esi
	call	DWORD PTR ?oglLinkProgram@@3P6GXI@ZA	; oglLinkProgram

; 97   : 
; 98   : #ifdef SHADER_DEBUG
; 99   : #define oglGetObjectParameteriv ((PFNGLGETOBJECTPARAMETERIVARBPROC) wglGetProcAddress("glGetObjectParameterivARB"))
; 100  : #define oglGetInfoLog ((PFNGLGETINFOLOGARBPROC) wglGetProcAddress("glGetInfoLogARB"))
; 101  : 		oglGetObjectParameteriv(pid, GL_OBJECT_LINK_STATUS_ARB, &result);

	lea	eax, DWORD PTR _result$[esp+2068]
	push	eax
	push	35714					; 00008b82H
	push	esi
	push	OFFSET $SG48306
	call	ebx
	call	eax

; 102  : 		oglGetInfoLog(pid, 2047, NULL, (char*)info);

	lea	eax, DWORD PTR _info$[esp+2068]
	push	eax
	push	ebp
	push	2047					; 000007ffH
	push	esi
	push	OFFSET $SG48307
	call	ebx
	call	eax

; 103  : 		if (!result)

	cmp	DWORD PTR _result$[esp+2068], ebp
	jne	SHORT $LN3@compilePro

; 104  : 		{
; 105  : 			MessageBox(NULL, info, "LINK", 0x00000000L);

	push	ebp
	push	OFFSET $SG48309
	lea	eax, DWORD PTR _info$[esp+2076]

; 106  : 			ExitProcess(0);

	jmp	SHORT $LN6@compilePro
$LN3@compilePro:
	pop	edi

; 107  : 		}
; 108  : #endif
; 109  : 	return pid;

	mov	eax, esi
	pop	esi
	pop	ebp
	pop	ebx

; 110  : }

	add	esp, 2052				; 00000804H
	ret	4
$LN7@compilePro:
?compileProgram@@YGHPBD@Z ENDP				; compileProgram
fltused	ENDS
END
